!function t(e,n,i){function r(o,a){if(!n[o]){if(!e[o]){var u="function"==typeof require&&require;if(!a&&u)return u(o,!0);if(s)return s(o,!0);var h=new Error("Cannot find module '"+o+"'");throw h.code="MODULE_NOT_FOUND",h}var c=n[o]={exports:{}};e[o][0].call(c.exports,function(t){var n=e[o][1][t];return r(n?n:t)},c,c.exports,t,e,n,i)}return n[o].exports}for(var s="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(t,e,n){function i(){c=!1,a.length?h=a.concat(h):l=-1,h.length&&r()}function r(){if(!c){var t=setTimeout(i);c=!0;for(var e=h.length;e;){for(a=h,h=[];++l<e;)a&&a[l].run();l=-1,e=h.length}a=null,c=!1,clearTimeout(t)}}function s(t,e){this.fun=t,this.array=e}function o(){}var a,u=e.exports={},h=[],c=!1,l=-1;u.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];h.push(new s(t,e)),1!==h.length||c||setTimeout(r,0)},s.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=o,u.addListener=o,u.once=o,u.off=o,u.removeListener=o,u.removeAllListeners=o,u.emit=o,u.binding=function(t){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(t){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],2:[function(t,e,n){var i=t("../utils/kew"),r=t("../utils/signals");e.exports=function(t,e,n){function s(){return p=i.defer(),l(y,o),p.promise}function o(){g=d,m.dispatch(v)}function a(t){c(),g===_?p.reject("too soon!"):t!==v?p.reject("wrong action!"):p.resolve("success!")}function u(){return v}function h(){c()}function c(){clearTimeout(f)}function l(t,e){f=setTimeout(e,t)}var f,p,_=0,d=1,m=new r,g=_,v=t,y=e;this.stateIsOnTimeSignal=m,this.getRequestedAction=u,this.fireAction=a,this.execute=s,this.destroy=h}},{"../utils/kew":8,"../utils/signals":10}],3:[function(t,e,n){var i=t("../utils/kew"),r=t("../utils/writeInDiv"),s=t("./Move"),o=t("./constants"),a=t("./signalBus"),u=t("../utils/sampleArray");e.exports=function(){function t(t,e,r,s,o){var u=0;for(g=i.defer(),v=t,C=[],x=r,y=o,T=s,u;e>u;u++)h();T||a.ACTION_FIRED.add(n)}function e(){var t=0;for(w&&w.destroy(),t;t<C.length;t++)C[t].destroy();C=null,a.ACTION_FIRED.remove(n)}function n(t){w&&w.fireAction(t)}function h(){var t=u(o.ALL_ACTIONS),e=new s(t,x);C.push(e)}function c(){return l(),r(v,"Get READY!"),g.promise}function l(){w=C.shift(),w?(w.stateIsOnTimeSignal.add(p),f()):g.resolve()}function f(){w.execute().then(_).fail(d).fin(m)}function p(){var t,e=w.getRequestedAction();T?(t=Math.random()<y,t?w.fireAction():w.fireAction(e)):r(v,"FIRE! "+e)}function _(){T?r(v,"AI has "+C.length+" moves left"):r(v,"Got it!")}function d(t){T?r(v,"AI missed!"):r(v,"Woops, "+t),h()}function m(){w.destroy(),l()}var g,v,y,x,C,w,T;this.init=t,this.start=c,this.destroy=e}},{"../utils/kew":8,"../utils/sampleArray":9,"../utils/writeInDiv":11,"./Move":2,"./constants":5,"./signalBus":6}],4:[function(t,e,n){function i(){window.addEventListener("keydown",r)}function r(t){var e;switch(t.keyCode){case 13:e=s.ACTION_ENTER;break;case 38:e=s.ACTION_UP;break;case 40:e=s.ACTION_DOWN;break;case 37:e=s.ACTION_LEFT;break;case 39:e=s.ACTION_RIGHT}o.ACTION_FIRED.dispatch(e)}var s=t("./constants"),o=t("./signalBus");n.init=i},{"./constants":5,"./signalBus":6}],5:[function(t,e,n){var i="ACTION_UP",r="ACTION_ENTER",s="ACTION_DOWN",o="ACTION_LEFT",a="ACTION_RIGHT";n.ACTION_ENTER=r,n.ACTION_UP=i,n.ACTION_DOWN=s,n.ACTION_LEFT=o,n.ACTION_RIGHT=a,n.ALL_ACTIONS=[i,s,o,a]},{}],6:[function(t,e,n){var i=t("../utils/signals");n.ACTION_FIRED=new i},{"../utils/signals":10}],7:[function(t,e,n){function i(t){t===l.ACTION_ENTER&&(d?a():r())}function r(){d&&a(),c("general",""),d=!0,p.init("player",m.moves,m.playerDelay,!1),_.init("ai",m.moves,m.aiDelay,!0,m.aiMissChance),p.start().then(function(){o(!0)}).fail(s),_.start().then(function(){o(!1)}).fail(s)}function s(t){}function o(t){c("player",""),c("ai",""),t?c("general","You won!<br>Press `ENTER` to replay"):c("general","You lost...<br>Press `ENTER` to replay"),a()}function a(){d=!1,p.destroy(),_.destroy()}var u=t("./core/actionHandler"),h=t("./core/signalBus"),c=t("./utils/writeInDiv"),l=t("./core/constants"),f=t("./core/Player"),p=new f,_=new f,d=!1,m=new function(){this.moves=5,this.playerDelay=1e3,this.aiDelay=2e3,this.aiMissChance=.1,this.start=r,this.stop=a},g=new dat.GUI;g.add(m,"moves",0,10).step(1),g.add(m,"playerDelay",0,5e3).step(100),g.add(m,"aiDelay",0,5e3).step(100),g.add(m,"aiMissChance",0,1).step(.05),g.add(m,"start"),g.add(m,"stop"),c("general","Press `ENTER` to start"),u.init(),h.ACTION_FIRED.add(i)},{"./core/Player":3,"./core/actionHandler":4,"./core/constants":5,"./core/signalBus":6,"./utils/writeInDiv":11}],8:[function(t,e,n){(function(t){function n(t,e){this.promise=this,this._isPromise=!0,this._successFn=t,this._failFn=e,this._scope=this,this._boundArgs=null,this._hasContext=!1,this._nextContext=void 0,this._currentContext=void 0}function i(t){t()}function r(t,e,n,i){try{t.resolve(e.apply(n,i))}catch(r){t.reject(r)}}function s(){return i}function o(t){i=t}function a(){this.errorsEmitted=0,this.errorsHandled=0}function u(t,e,n){e?t.reject(e):t.resolve(n)}function h(t){return!!t._isPromise}function c(t){return("object"==typeof t||"function"==typeof t)&&"function"==typeof t.then}function l(t){var e=new n;return e.resolve(t),e}function f(t){var e=new n;return e.reject(t),e}function p(t,e,n){return t[e]=n,n}function _(t,e,n){return t[e]={state:"fulfilled",value:n},n}function d(t,e,n){return t[e]={state:"rejected",reason:n},n}function m(t){return 1==arguments.length&&Array.isArray(t)||(t=Array.prototype.slice.call(arguments,0)),g(t)}function g(t){if(!t.length)return l([]);for(var e=[],i=!1,r=new n,s=t.length,o=0;o<t.length;o+=1)t[o]&&c(t[o])?t[o].then(p.bind(null,e,o)).then(function(){s--,i||0!==s||(i=!0,r.resolve(e))},function(t){i||(i=!0,r.reject(t))}):(e[o]=t[o],s-=1);return 0!==s||i||(i=!0,r.resolve(e)),r}function v(t){if(!Array.isArray(t))throw Error('The input to "allSettled()" should be an array of Promise or values');if(!t.length)return l([]);for(var e=[],i=new n,r=t.length,s=0;s<t.length;s+=1)t[s]&&c(t[s])?t[s].then(_.bind(null,e,s),d.bind(null,e,s)).then(function(){0===--r&&i.resolve(e)}):(_(e,s,t[s]),0===--r&&i.resolve(e));return i}function y(t,e){l(t).spread(e)}function x(){return new n}function C(t,e){var i=void 0,r=t;if("undefined"!=typeof e&&(r=e,i=t),"number"!=typeof r)throw new Error("Bad delay value "+r);var s=new n;return setTimeout(function(){s.resolve(i)},r),s}function w(t,e){var s=Array.prototype.slice.call(arguments,1),o=new n;return i(r.bind(null,o,t,void 0,s)),o}function T(t,e){var n=Array.prototype.slice.call(arguments,0);return n.splice(1,0,void 0),A.apply(void 0,n)}function A(t,e,n){return E.apply(null,arguments)()}function E(t,e,i){var r=Array.prototype.slice.call(arguments,2);return function(i){var s=new n;try{t.apply(e,r.concat(Array.prototype.slice.call(arguments,0),s.makeNodeResolver()))}catch(o){s.reject(o)}return s}}"undefined"!=typeof t&&"function"==typeof t.nextTick&&(i=t.nextTick);var b=new a;n.prototype._handleError=function(){this._errorHandled||(b.errorsHandled++,this._errorHandled=!0)},n.prototype._useContext=function(t){return this._nextContext=this._currentContext=t,this._hasContext=!0,this},n.prototype.clearContext=function(){return this._hasContext=!1,this._nextContext=void 0,this},n.prototype.setContext=function(t){return this._nextContext=t,this._hasContext=!0,this},n.prototype.getContext=function(){return this._nextContext},n.prototype.resolve=function(t){if(this._error||this._hasData)throw new Error("Unable to resolve or reject the same promise twice");var e;if(t&&h(t)){if(this._child=t,this._promises){for(e=0;e<this._promises.length;e+=1)t._chainPromise(this._promises[e]);delete this._promises}if(this._onComplete){for(e=0;e<this._onComplete.length;e+=1)t.fin(this._onComplete[e]);delete this._onComplete}}else if(t&&c(t))t.then(function(t){this.resolve(t)}.bind(this),function(t){this.reject(t)}.bind(this));else{if(this._hasData=!0,this._data=t,this._onComplete)for(e=0;e<this._onComplete.length;e++)this._onComplete[e]();if(this._promises){for(e=0;e<this._promises.length;e+=1)this._promises[e]._useContext(this._nextContext),this._promises[e]._withInput(t);delete this._promises}}},n.prototype.reject=function(e){if(this._error||this._hasData)throw new Error("Unable to resolve or reject the same promise twice");var n;if(this._error=e,b.errorsEmitted++,this._ended&&(this._handleError(),t.nextTick(function(){throw e})),this._onComplete)for(n=0;n<this._onComplete.length;n++)this._onComplete[n]();if(this._promises){for(this._handleError(),n=0;n<this._promises.length;n+=1)this._promises[n]._useContext(this._nextContext),this._promises[n]._withError(e);delete this._promises}},n.prototype.then=function(t,e){var i=new n(t,e);return this._nextContext&&i._useContext(this._nextContext),this._child?this._child._chainPromise(i):this._chainPromise(i),i},n.prototype.thenBound=function(t,e,i){var r=new n(t);return this._nextContext&&r._useContext(this._nextContext),r._scope=e,arguments.length>2&&(r._boundArgs=Array.prototype.slice.call(arguments,2)),this._child?this._child._chainPromise(r):this._chainPromise(r),r},n.prototype.fail=function(t){return this.then(null,t)},n.prototype.failBound=function(t,e,i){var r=new n(null,t);return this._nextContext&&r._useContext(this._nextContext),r._scope=e,arguments.length>2&&(r._boundArgs=Array.prototype.slice.call(arguments,2)),this._child?this._child._chainPromise(r):this._chainPromise(r),r},n.prototype.spread=function(t){return this.then(g).then(function(e){return t.apply(null,e)})},n.prototype.spreadBound=function(t,e,n){var i=Array.prototype.slice.call(arguments,2);return this.then(g).then(function(n){return t.apply(e,i.concat(n))})},n.prototype.fin=function(t){return this._hasData||this._error?(t(),this):(this._child?this._child.fin(t):this._onComplete?this._onComplete.push(t):this._onComplete=[t],this)},n.prototype.end=function(){return this._end(),this},n.prototype._end=function(){if(this._error)throw this._handleError(),this._error;return this._ended=!0,this},n.prototype.done=function(t,e){var n=this;(t||e)&&(n=n.then(t,e)),n._end()},n.prototype.timeout=function(t,e){var i=new n,r=!1,s=setTimeout(function(){i.reject(new Error(e||"Promise timeout after "+t+" ms.")),r=!0},t);return this.then(function(t){r||(clearTimeout(s),i.resolve(t))},function(t){r||(clearTimeout(s),i.reject(t))}),i.promise},n.prototype._withInput=function(t){this._successFn?this._nextTick(this._successFn,[t,this._currentContext]):this.resolve(t),delete this._currentContext},n.prototype._withError=function(t){this._failFn?this._nextTick(this._failFn,[t,this._currentContext]):this.reject(t),delete this._currentContext},n.prototype._nextTick=function(t,e){this._boundArgs&&(e=this._boundArgs.concat(e)),i(r.bind(null,this,t,this._scope,e))},n.prototype._chainPromise=function(t){this._hasContext&&t._useContext(this._nextContext),this._child?this._child._chainPromise(t):this._hasData?t._withInput(this._data):this._error?(this._handleError(),t._withError(this._error)):this._promises?this._promises.push(t):this._promises=[t]},n.prototype.makeNodeResolver=function(){return u.bind(null,this)},n.prototype.delay=function(t){return this.then(function(e){return C(e,t)})},e.exports={all:m,bindPromise:E,defer:x,delay:C,fcall:w,isPromise:h,isPromiseLike:c,ncall:A,nfcall:T,resolve:l,reject:f,spread:y,stats:b,allSettled:v,Promise:n,getNextTickFunction:s,setNextTickFunction:o}}).call(this,t("_process"))},{_process:1}],9:[function(t,e,n){e.exports=function(t){return t[Math.floor(Math.random()*t.length)]}},{}],10:[function(t,e,n){/** @license
 * JS Signals <http://millermedeiros.github.com/js-signals/>
 * Released under the MIT license
 * Author: Miller Medeiros
 * Version: 1.0.0 - Build: 268 (2012/11/29 05:48 PM)
 */
!function(t){function n(t,e,n,i,r){this._listener=e,this._isOnce=n,this.context=i,this._signal=t,this._priority=r||0}function i(t,e){if("function"!=typeof t)throw new Error("listener is a required param of {fn}() and should be a Function.".replace("{fn}",e))}function r(){this._bindings=[],this._prevParams=null;var t=this;this.dispatch=function(){r.prototype.dispatch.apply(t,arguments)}}n.prototype={active:!0,params:null,execute:function(t){var e,n;return this.active&&this._listener&&(n=this.params?this.params.concat(t):t,e=this._listener.apply(this.context,n),this._isOnce&&this.detach()),e},detach:function(){return this.isBound()?this._signal.remove(this._listener,this.context):null},isBound:function(){return!!this._signal&&!!this._listener},isOnce:function(){return this._isOnce},getListener:function(){return this._listener},getSignal:function(){return this._signal},_destroy:function(){delete this._signal,delete this._listener,delete this.context},toString:function(){return"[SignalBinding isOnce:"+this._isOnce+", isBound:"+this.isBound()+", active:"+this.active+"]"}},r.prototype={VERSION:"1.0.0",memorize:!1,_shouldPropagate:!0,active:!0,_registerListener:function(t,e,i,r){var s,o=this._indexOfListener(t,i);if(-1!==o){if(s=this._bindings[o],s.isOnce()!==e)throw new Error("You cannot add"+(e?"":"Once")+"() then add"+(e?"Once":"")+"() the same listener without removing the relationship first.")}else s=new n(this,t,e,i,r),this._addBinding(s);return this.memorize&&this._prevParams&&s.execute(this._prevParams),s},_addBinding:function(t){var e=this._bindings.length;do--e;while(this._bindings[e]&&t._priority<=this._bindings[e]._priority);this._bindings.splice(e+1,0,t)},_indexOfListener:function(t,e){for(var n,i=this._bindings.length;i--;)if(n=this._bindings[i],n._listener===t&&n.context===e)return i;return-1},has:function(t,e){return-1!==this._indexOfListener(t,e)},add:function(t,e,n){return i(t,"add"),this._registerListener(t,!1,e,n)},addOnce:function(t,e,n){return i(t,"addOnce"),this._registerListener(t,!0,e,n)},remove:function(t,e){i(t,"remove");var n=this._indexOfListener(t,e);return-1!==n&&(this._bindings[n]._destroy(),this._bindings.splice(n,1)),t},removeAll:function(){for(var t=this._bindings.length;t--;)this._bindings[t]._destroy();this._bindings.length=0},getNumListeners:function(){return this._bindings.length},halt:function(){this._shouldPropagate=!1},dispatch:function(t){if(this.active){var e,n=Array.prototype.slice.call(arguments),i=this._bindings.length;if(this.memorize&&(this._prevParams=n),i){e=this._bindings.slice(),this._shouldPropagate=!0;do i--;while(e[i]&&this._shouldPropagate&&e[i].execute(n)!==!1)}}},forget:function(){this._prevParams=null},dispose:function(){this.removeAll(),delete this._bindings,delete this._prevParams},toString:function(){return"[Signal active:"+this.active+" numListeners:"+this.getNumListeners()+"]"}};var s=r;s.Signal=r,"function"==typeof define&&define.amd?define(function(){return s}):"undefined"!=typeof e&&e.exports?e.exports=s:t.signals=s}(this)},{}],11:[function(t,e,n){var i={player:document.getElementsByClassName("text--player")[0],general:document.getElementsByClassName("text--general")[0],ai:document.getElementsByClassName("text--ai")[0]};e.exports=function(t,e){i[t].innerHTML=e}},{}]},{},[7]);
//# sourceMappingURL=main.js.map
